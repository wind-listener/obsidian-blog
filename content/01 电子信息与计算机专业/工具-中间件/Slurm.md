---
title: "Slurm"
date: 2025-10-14
draft: false
---

https://slurm.schedmd.com/overview.html



SLURM（**Simple Linux Utility for Resource Management**）是一个开源的、高度可扩展的集群管理和作业调度系统，广泛应用于高性能计算（HPC）环境中。SLURM主要用于管理集群资源和调度作业，帮助用户在共享计算资源时最大化计算效率。

### 主要功能
1. **资源管理**：SLURM能够追踪和管理集群中的计算资源（如CPU、内存、GPU等）。它将集群资源划分为多个分区（partition），每个分区可以配置不同的资源限制和调度策略。

2. **作业调度**：SLURM提供了多种作业调度策略（如FIFO、优先级调度、公平共享调度等），用户可以根据需求选择合适的调度方式。SLURM会根据作业的需求（如资源、时间等）和集群的当前状态，优化资源的分配和作业的执行顺序。

3. **作业管理**：用户可以使用SLURM提交、监控、取消作业，以及检查作业的运行状态和日志。SLURM提供了丰富的命令行工具，如`sbatch`（提交作业）、`squeue`（查询作业队列）、`scancel`（取消作业）等。

4. **弹性扩展**：SLURM支持动态增加或减少计算节点，这使得它非常适合在需要弹性资源管理的环境中使用。

5. **高可用性**：SLURM通过支持多控制器模式，实现了高可用性。如果主控制器出现故障，备用控制器可以接管工作，保证系统的持续运行。

### 典型工作流程
1. **编写脚本**：用户通常会编写一个脚本文件，其中包含了作业的资源需求、执行的命令以及其它必要的配置。例如，一个简单的SLURM脚本可能如下：

    ```bash
    #!/bin/bash
    #SBATCH --job-name=my_job       # 作业名称
    #SBATCH --output=output.log     # 输出文件
    #SBATCH --error=error.log       # 错误日志文件
    #SBATCH --ntasks=1              # 任务数
    #SBATCH --time=01:00:00         # 最大运行时间
    #SBATCH --mem=4G                # 内存需求

    module load python/3.8          # 加载模块
    python my_script.py             # 执行脚本
    ```

2. **提交作业**：使用`sbatch`命令提交上述脚本文件：

    ```bash
    sbatch my_job_script.sh
    ```

3. **监控作业**：使用`squeue`命令查看作业状态：

    ```bash
    squeue -u my_username
    ```

4. **取消作业**：如果需要取消某个作业，可以使用`scancel`命令，并指定作业ID：

    ```bash
    scancel job_id
    ```

### 资源管理和调度策略
SLURM支持多种调度策略和资源配置方式，例如：
- **多队列调度**：不同的用户或作业类型可以被分配到不同的队列中，每个队列可以有不同的优先级和资源限制。
- **优先级调度**：作业可以根据用户设定的优先级来进行调度，优先级越高的作业会优先获得资源。
- **公平共享调度**：SLURM支持公平共享调度（Fair Share Scheduling），确保资源在用户之间公平分配，防止某个用户占用过多资源。

### 使用场景
SLURM广泛应用于各类需要高性能计算的领域，例如：
- **科学计算**：气候模拟、基因组分析等需要大量计算资源的领域。
- **工程仿真**：如汽车碰撞模拟、流体力学计算等。
- **机器学习**：训练大型深度学习模型时，需要调度大量GPU资源。

总之，SLURM作为一种强大的集群资源管理和作业调度工具，在HPC领域具有非常重要的地位。它的可扩展性、灵活性和高效性使其成为众多科研机构和企业的首选。
